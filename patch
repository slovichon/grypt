diff -ru pidgin-2.2.0.orig/configure pidgin-2.2.0/configure
--- pidgin-2.2.0.orig/configure	2007-09-14 03:31:39.000000000 -0400
+++ pidgin-2.2.0/configure	2007-09-26 14:07:14.000000000 -0400
@@ -37341,7 +37341,7 @@
 fi
 
 
-ac_config_files="$ac_config_files Makefile Doxyfile doc/Makefile doc/pidgin.1 doc/finch.1 m4macros/Makefile pidgin.apspec pidgin/Makefile pidgin/pidgin.pc pidgin/pidgin-uninstalled.pc pidgin/pixmaps/Makefile pidgin/pixmaps/animations/Makefile pidgin/pixmaps/animations/16/Makefile pidgin/pixmaps/buddy_icons/Makefile pidgin/pixmaps/buddy_icons/qq/Makefile pidgin/pixmaps/dialogs/Makefile pidgin/pixmaps/dialogs/16/Makefile pidgin/pixmaps/dialogs/16/scalable/Makefile pidgin/pixmaps/dialogs/64/Makefile pidgin/pixmaps/dialogs/64/scalable/Makefile pidgin/pixmaps/emblems/Makefile pidgin/pixmaps/emblems/16/Makefile pidgin/pixmaps/emblems/16/scalable/Makefile pidgin/pixmaps/emotes/Makefile pidgin/pixmaps/emotes/default/Makefile pidgin/pixmaps/emotes/default/24/Makefile pidgin/pixmaps/emotes/default/24/scalable/Makefile pidgin/pixmaps/emotes/none/Makefile pidgin/pixmaps/icons/Makefile pidgin/pixmaps/icons/16/Makefile pidgin/pixmaps/icons/16/scalable/Makefile pidgin/pixmaps/icons/22/Makefile pidgin/pixmaps/icons/22/scalable/Makefile pidgin/pixmaps/icons/24/Makefile pidgin/pixmaps/icons/24/scalable/Makefile pidgin/pixmaps/icons/32/Makefile pidgin/pixmaps/icons/32/scalable/Makefile pidgin/pixmaps/icons/48/Makefile pidgin/pixmaps/icons/48/scalable/Makefile pidgin/pixmaps/protocols/Makefile pidgin/pixmaps/protocols/16/Makefile pidgin/pixmaps/protocols/16/scalable/Makefile pidgin/pixmaps/protocols/22/Makefile pidgin/pixmaps/protocols/22/scalable/Makefile pidgin/pixmaps/protocols/48/Makefile pidgin/pixmaps/protocols/48/scalable/Makefile pidgin/pixmaps/status/Makefile pidgin/pixmaps/status/11/Makefile pidgin/pixmaps/status/11/scalable/Makefile pidgin/pixmaps/status/11/rtl/Makefile pidgin/pixmaps/status/16/Makefile pidgin/pixmaps/status/16/rtl/Makefile pidgin/pixmaps/status/16/scalable/Makefile pidgin/pixmaps/status/22/Makefile pidgin/pixmaps/status/22/rtl/Makefile pidgin/pixmaps/status/22/scalable/Makefile pidgin/pixmaps/status/32/Makefile pidgin/pixmaps/status/32/rtl/Makefile pidgin/pixmaps/status/32/scalable/Makefile pidgin/pixmaps/status/48/Makefile pidgin/pixmaps/status/48/rtl/Makefile pidgin/pixmaps/toolbar/Makefile pidgin/pixmaps/toolbar/16/Makefile pidgin/pixmaps/toolbar/16/scalable/Makefile pidgin/pixmaps/toolbar/22/Makefile pidgin/pixmaps/toolbar/22/scalable/Makefile pidgin/pixmaps/tray/Makefile pidgin/pixmaps/tray/16/Makefile pidgin/pixmaps/tray/16/scalable/Makefile pidgin/pixmaps/tray/22/Makefile pidgin/pixmaps/tray/22/scalable/Makefile pidgin/pixmaps/tray/32/Makefile pidgin/pixmaps/tray/48/Makefile pidgin/plugins/Makefile pidgin/plugins/cap/Makefile pidgin/plugins/gestures/Makefile pidgin/plugins/gevolution/Makefile pidgin/plugins/musicmessaging/Makefile pidgin/plugins/perl/Makefile pidgin/plugins/perl/common/Makefile.PL pidgin/plugins/ticker/Makefile libpurple/example/Makefile libpurple/gconf/Makefile libpurple/purple.pc libpurple/purple-uninstalled.pc libpurple/plugins/Makefile libpurple/plugins/mono/Makefile libpurple/plugins/mono/api/Makefile libpurple/plugins/mono/loader/Makefile libpurple/plugins/perl/Makefile libpurple/plugins/perl/common/Makefile.PL libpurple/plugins/ssl/Makefile libpurple/plugins/tcl/Makefile libpurple/Makefile libpurple/protocols/Makefile libpurple/protocols/bonjour/Makefile libpurple/protocols/gg/Makefile libpurple/protocols/irc/Makefile libpurple/protocols/jabber/Makefile libpurple/protocols/msn/Makefile libpurple/protocols/myspace/Makefile libpurple/protocols/novell/Makefile libpurple/protocols/null/Makefile libpurple/protocols/oscar/Makefile libpurple/protocols/qq/Makefile libpurple/protocols/sametime/Makefile libpurple/protocols/silc/Makefile libpurple/protocols/silc10/Makefile libpurple/protocols/simple/Makefile libpurple/protocols/toc/Makefile libpurple/protocols/yahoo/Makefile libpurple/protocols/zephyr/Makefile libpurple/tests/Makefile libpurple/version.h share/Makefile share/sounds/Makefile share/ca-certs/Makefile finch/Makefile finch/libgnt/Makefile finch/libgnt/gnt.pc finch/libgnt/wms/Makefile finch/plugins/Makefile po/Makefile.in pidgin.spec"
+ac_config_files="$ac_config_files Makefile Doxyfile doc/Makefile doc/pidgin.1 doc/finch.1 m4macros/Makefile pidgin.apspec pidgin/Makefile pidgin/pidgin.pc pidgin/pidgin-uninstalled.pc pidgin/pixmaps/Makefile pidgin/pixmaps/animations/Makefile pidgin/pixmaps/animations/16/Makefile pidgin/pixmaps/buddy_icons/Makefile pidgin/pixmaps/buddy_icons/qq/Makefile pidgin/pixmaps/dialogs/Makefile pidgin/pixmaps/dialogs/16/Makefile pidgin/pixmaps/dialogs/16/scalable/Makefile pidgin/pixmaps/dialogs/64/Makefile pidgin/pixmaps/dialogs/64/scalable/Makefile pidgin/pixmaps/emblems/Makefile pidgin/pixmaps/emblems/16/Makefile pidgin/pixmaps/emblems/16/scalable/Makefile pidgin/pixmaps/emotes/Makefile pidgin/pixmaps/emotes/default/Makefile pidgin/pixmaps/emotes/default/24/Makefile pidgin/pixmaps/emotes/default/24/scalable/Makefile pidgin/pixmaps/emotes/none/Makefile pidgin/pixmaps/icons/Makefile pidgin/pixmaps/icons/16/Makefile pidgin/pixmaps/icons/16/scalable/Makefile pidgin/pixmaps/icons/22/Makefile pidgin/pixmaps/icons/22/scalable/Makefile pidgin/pixmaps/icons/24/Makefile pidgin/pixmaps/icons/24/scalable/Makefile pidgin/pixmaps/icons/32/Makefile pidgin/pixmaps/icons/32/scalable/Makefile pidgin/pixmaps/icons/48/Makefile pidgin/pixmaps/icons/48/scalable/Makefile pidgin/pixmaps/protocols/Makefile pidgin/pixmaps/protocols/16/Makefile pidgin/pixmaps/protocols/16/scalable/Makefile pidgin/pixmaps/protocols/22/Makefile pidgin/pixmaps/protocols/22/scalable/Makefile pidgin/pixmaps/protocols/48/Makefile pidgin/pixmaps/protocols/48/scalable/Makefile pidgin/pixmaps/status/Makefile pidgin/pixmaps/status/11/Makefile pidgin/pixmaps/status/11/scalable/Makefile pidgin/pixmaps/status/11/rtl/Makefile pidgin/pixmaps/status/16/Makefile pidgin/pixmaps/status/16/rtl/Makefile pidgin/pixmaps/status/16/scalable/Makefile pidgin/pixmaps/status/22/Makefile pidgin/pixmaps/status/22/rtl/Makefile pidgin/pixmaps/status/22/scalable/Makefile pidgin/pixmaps/status/32/Makefile pidgin/pixmaps/status/32/rtl/Makefile pidgin/pixmaps/status/32/scalable/Makefile pidgin/pixmaps/status/48/Makefile pidgin/pixmaps/status/48/rtl/Makefile pidgin/pixmaps/toolbar/Makefile pidgin/pixmaps/toolbar/16/Makefile pidgin/pixmaps/toolbar/16/scalable/Makefile pidgin/pixmaps/toolbar/22/Makefile pidgin/pixmaps/toolbar/22/scalable/Makefile pidgin/pixmaps/tray/Makefile pidgin/pixmaps/tray/16/Makefile pidgin/pixmaps/tray/16/scalable/Makefile pidgin/pixmaps/tray/22/Makefile pidgin/pixmaps/tray/22/scalable/Makefile pidgin/pixmaps/tray/32/Makefile pidgin/pixmaps/tray/48/Makefile pidgin/plugins/Makefile pidgin/plugins/cap/Makefile pidgin/plugins/gestures/Makefile pidgin/plugins/gevolution/Makefile pidgin/plugins/grypt/Makefile pidgin/plugins/musicmessaging/Makefile pidgin/plugins/perl/Makefile pidgin/plugins/perl/common/Makefile.PL pidgin/plugins/ticker/Makefile libpurple/example/Makefile libpurple/gconf/Makefile libpurple/purple.pc libpurple/purple-uninstalled.pc libpurple/plugins/Makefile libpurple/plugins/mono/Makefile libpurple/plugins/mono/api/Makefile libpurple/plugins/mono/loader/Makefile libpurple/plugins/perl/Makefile libpurple/plugins/perl/common/Makefile.PL libpurple/plugins/ssl/Makefile libpurple/plugins/tcl/Makefile libpurple/Makefile libpurple/protocols/Makefile libpurple/protocols/bonjour/Makefile libpurple/protocols/gg/Makefile libpurple/protocols/irc/Makefile libpurple/protocols/jabber/Makefile libpurple/protocols/msn/Makefile libpurple/protocols/myspace/Makefile libpurple/protocols/novell/Makefile libpurple/protocols/null/Makefile libpurple/protocols/oscar/Makefile libpurple/protocols/qq/Makefile libpurple/protocols/sametime/Makefile libpurple/protocols/silc/Makefile libpurple/protocols/silc10/Makefile libpurple/protocols/simple/Makefile libpurple/protocols/toc/Makefile libpurple/protocols/yahoo/Makefile libpurple/protocols/zephyr/Makefile libpurple/tests/Makefile libpurple/version.h share/Makefile share/sounds/Makefile share/ca-certs/Makefile finch/Makefile finch/libgnt/Makefile finch/libgnt/gnt.pc finch/libgnt/wms/Makefile finch/plugins/Makefile po/Makefile.in pidgin.spec"
 
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
@@ -38428,6 +38428,7 @@
     "pidgin/plugins/cap/Makefile") CONFIG_FILES="$CONFIG_FILES pidgin/plugins/cap/Makefile" ;;
     "pidgin/plugins/gestures/Makefile") CONFIG_FILES="$CONFIG_FILES pidgin/plugins/gestures/Makefile" ;;
     "pidgin/plugins/gevolution/Makefile") CONFIG_FILES="$CONFIG_FILES pidgin/plugins/gevolution/Makefile" ;;
+    "pidgin/plugins/grypt/Makefile") CONFIG_FILES="$CONFIG_FILES pidgin/plugins/grypt/Makefile" ;;
     "pidgin/plugins/musicmessaging/Makefile") CONFIG_FILES="$CONFIG_FILES pidgin/plugins/musicmessaging/Makefile" ;;
     "pidgin/plugins/perl/Makefile") CONFIG_FILES="$CONFIG_FILES pidgin/plugins/perl/Makefile" ;;
     "pidgin/plugins/perl/common/Makefile.PL") CONFIG_FILES="$CONFIG_FILES pidgin/plugins/perl/common/Makefile.PL" ;;
diff -ru pidgin-2.2.0.orig/libpurple/conversation.c pidgin-2.2.0/libpurple/conversation.c
--- pidgin-2.2.0.orig/libpurple/conversation.c	2007-09-14 00:45:39.000000000 -0400
+++ pidgin-2.2.0/libpurple/conversation.c	2007-09-26 14:03:48.000000000 -0400
@@ -131,7 +131,7 @@
 
 		purple_signal_emit(purple_conversations_get_handle(), "sending-im-msg",
 						 account,
-						 purple_conversation_get_name(conv), &sent);
+						 purple_conversation_get_name(conv), &sent, &msgflags);
 
 		if (sent != NULL && sent[0] != '\0') {
 
@@ -2164,12 +2164,13 @@
 						 purple_value_new(PURPLE_TYPE_UINT));
 
 	purple_signal_register(handle, "sending-im-msg",
-						 purple_marshal_VOID__POINTER_POINTER_POINTER,
-						 NULL, 3,
+						 purple_marshal_VOID__POINTER_POINTER_POINTER_POINTER,
+						 NULL, 4,
 						 purple_value_new(PURPLE_TYPE_SUBTYPE,
 										PURPLE_SUBTYPE_ACCOUNT),
 						 purple_value_new(PURPLE_TYPE_STRING),
-						 purple_value_new_outgoing(PURPLE_TYPE_STRING));
+						 purple_value_new_outgoing(PURPLE_TYPE_STRING),
+						 purple_value_new(PURPLE_TYPE_UINT));
 
 	purple_signal_register(handle, "sent-im-msg",
 						 purple_marshal_VOID__POINTER_POINTER_POINTER,
diff -ru pidgin-2.2.0.orig/libpurple/conversation.h pidgin-2.2.0/libpurple/conversation.h
--- pidgin-2.2.0.orig/libpurple/conversation.h	2007-09-14 00:45:39.000000000 -0400
+++ pidgin-2.2.0/libpurple/conversation.h	2007-09-26 14:07:28.000000000 -0400
@@ -121,6 +121,7 @@
 	PURPLE_MESSAGE_NO_LINKIFY  = 0x4000, /**< Message should not be auto-
 										   linkified */
 	PURPLE_MESSAGE_INVISIBLE   = 0x8000, /**< Message should not be displayed */
+ 	PURPLE_MESSAGE_ENCRYPTED   = 0x10000  /**< Message sent encrypted */
 } PurpleMessageFlags;
 
 /**
diff -ru pidgin-2.2.0.orig/libpurple/log.c pidgin-2.2.0/libpurple/log.c
--- pidgin-2.2.0.orig/libpurple/log.c	2007-09-14 00:45:39.000000000 -0400
+++ pidgin-2.2.0/libpurple/log.c	2007-09-26 14:03:48.000000000 -0400
@@ -1351,6 +1351,8 @@
 	if(log->type == PURPLE_LOG_SYSTEM){
 		written += fprintf(data->file, "---- %s @ %s ----<br/>\n", msg_fixed, date);
 	} else {
+		if (type & PURPLE_MESSAGE_ENCRYPTED)
+			written += fprintf(data->file, "*");
 		if (type & PURPLE_MESSAGE_SYSTEM)
 			written += fprintf(data->file, "<font size=\"2\">(%s)</font><b> %s</b><br/>\n", date, msg_fixed);
 		else if (type & PURPLE_MESSAGE_RAW)
@@ -1493,6 +1495,8 @@
 	if(log->type == PURPLE_LOG_SYSTEM){
 		written += fprintf(data->file, "---- %s @ %s ----\n", stripped, date);
 	} else {
+		if (type & PURPLE_MESSAGE_ENCRYPTED)
+			written += fprintf(data->file, "*");
 		if (type & PURPLE_MESSAGE_SEND ||
 			type & PURPLE_MESSAGE_RECV) {
 			if (type & PURPLE_MESSAGE_AUTO_RESP) {
diff -ru pidgin-2.2.0.orig/libpurple/protocols/oscar/family_locate.c pidgin-2.2.0/libpurple/protocols/oscar/family_locate.c
--- pidgin-2.2.0.orig/libpurple/protocols/oscar/family_locate.c	2007-09-14 00:45:40.000000000 -0400
+++ pidgin-2.2.0/libpurple/protocols/oscar/family_locate.c	2007-09-26 14:03:48.000000000 -0400
@@ -133,6 +133,10 @@
 	 {0x09, 0x46, 0x13, 0x49, 0x4c, 0x7f, 0x11, 0xd1,
 	  0x82, 0x22, 0x44, 0x45, 0x53, 0x54, 0x00, 0x00}},
 
+	{OSCAR_CAPABILITY_GRYPT,
+	 {0x09, 0x46, 0x13, 0x50, 0x4c, 0x7f, 0x11, 0xd1,
+	  0x82, 0x22, 0x44, 0x45, 0x53, 0x54, 0x00, 0x00}},
+
 	/*
 	 * Indeed, there are two of these.  The former appears to be correct,
 	 * but in some versions of winaim, the second one is set.  Either they
diff -ru pidgin-2.2.0.orig/libpurple/protocols/oscar/oscar.c pidgin-2.2.0/libpurple/protocols/oscar/oscar.c
--- pidgin-2.2.0.orig/libpurple/protocols/oscar/oscar.c	2007-09-14 00:45:40.000000000 -0400
+++ pidgin-2.2.0/libpurple/protocols/oscar/oscar.c	2007-09-26 14:03:48.000000000 -0400
@@ -64,7 +64,7 @@
 
 #define OSCAR_CONNECT_STEPS 6
 
-static OscarCapability purple_caps = OSCAR_CAPABILITY_CHAT | OSCAR_CAPABILITY_BUDDYICON | OSCAR_CAPABILITY_DIRECTIM | OSCAR_CAPABILITY_SENDFILE | OSCAR_CAPABILITY_UNICODE | OSCAR_CAPABILITY_INTEROPERATE | OSCAR_CAPABILITY_ICHAT;
+static OscarCapability purple_caps = OSCAR_CAPABILITY_CHAT | OSCAR_CAPABILITY_BUDDYICON | OSCAR_CAPABILITY_DIRECTIM | OSCAR_CAPABILITY_SENDFILE | OSCAR_CAPABILITY_UNICODE | OSCAR_CAPABILITY_INTEROPERATE | OSCAR_CAPABILITY_ICHAT | OSCAR_CAPABILITY_GRYPT;
 
 static guint8 features_aim[] = {0x01, 0x01, 0x01, 0x02};
 static guint8 features_icq[] = {0x01, 0x06};
@@ -705,6 +705,9 @@
 			case OSCAR_CAPABILITY_CAMERA:
 				tmp = _("Camera");
 				break;
+			case OSCAR_CAPABILITY_GRYPT:
+				tmp = _("Engryption");
+				break;
 			default:
 				tmp = NULL;
 				break;
@@ -5507,6 +5510,8 @@
 			return "hiptop";
 		if (userinfo->capabilities & OSCAR_CAPABILITY_SECUREIM)
 			return "secure";
+		if (userinfo->capabilities & OSCAR_CAPABILITY_GRYPT)
+			return "grypt";
 	}
 	return NULL;
 }
diff -ru pidgin-2.2.0.orig/libpurple/protocols/oscar/oscar.h pidgin-2.2.0/libpurple/protocols/oscar/oscar.h
--- pidgin-2.2.0.orig/libpurple/protocols/oscar/oscar.h	2007-09-14 00:45:40.000000000 -0400
+++ pidgin-2.2.0/libpurple/protocols/oscar/oscar.h	2007-09-26 14:03:48.000000000 -0400
@@ -337,7 +337,8 @@
 	OSCAR_CAPABILITY_ICHATAV              = 0x02000000,
 	OSCAR_CAPABILITY_LIVEVIDEO            = 0x04000000,
 	OSCAR_CAPABILITY_CAMERA               = 0x08000000,
-	OSCAR_CAPABILITY_LAST                 = 0x10000000
+	OSCAR_CAPABILITY_GRYPT                = 0x10000000,
+	OSCAR_CAPABILITY_LAST                 = 0x20000000
 } OscarCapability;
 
 /*
diff -ru pidgin-2.2.0.orig/pidgin/gtkconv.c pidgin-2.2.0/pidgin/gtkconv.c
--- pidgin-2.2.0.orig/pidgin/gtkconv.c	2007-09-14 04:33:10.000000000 -0400
+++ pidgin-2.2.0/pidgin/gtkconv.c	2007-09-26 14:03:48.000000000 -0400
@@ -5464,6 +5464,9 @@
 	if (gtk_text_buffer_get_char_count(gtk_text_view_get_buffer(GTK_TEXT_VIEW(gtkconv->imhtml))))
 		gtk_imhtml_append_text(GTK_IMHTML(gtkconv->imhtml), "<BR>", gtk_font_options_all | GTK_IMHTML_NO_SCROLL);
 
+	if (flags & PURPLE_MESSAGE_ENCRYPTED)
+		gtk_imhtml_append_text(GTK_IMHTML(gtkconv->imhtml), "*", gtk_font_options_all);
+
 	/* First message in a conversation. */
 	if (gtkconv->newday == 0)
 		pidgin_conv_calculate_newday(gtkconv, mtime);
diff -ru pidgin-2.2.0.orig/pidgin/pixmaps/emblems/16/Makefile.am pidgin-2.2.0/pidgin/pixmaps/emblems/16/Makefile.am
--- pidgin-2.2.0.orig/pidgin/pixmaps/emblems/16/Makefile.am	2007-05-03 00:29:49.000000000 -0400
+++ pidgin-2.2.0/pidgin/pixmaps/emblems/16/Makefile.am	2007-09-26 14:03:48.000000000 -0400
@@ -7,6 +7,7 @@
 		female.png \
 		founder.png \
 		free-for-chat.png \
+		../../../plugins/grypt/grypt.png \
 		game.png \
 		half-operator.png \
 		hiptop.png \
diff -ru pidgin-2.2.0.orig/pidgin/pixmaps/emblems/16/Makefile.in pidgin-2.2.0/pidgin/pixmaps/emblems/16/Makefile.in
--- pidgin-2.2.0.orig/pidgin/pixmaps/emblems/16/Makefile.in	2007-09-14 03:31:29.000000000 -0400
+++ pidgin-2.2.0/pidgin/pixmaps/emblems/16/Makefile.in	2007-09-26 14:03:48.000000000 -0400
@@ -425,6 +425,7 @@
 		female.png \
 		founder.png \
 		free-for-chat.png \
+		../../../plugins/grypt/grypt.png \
 		game.png \
 		half-operator.png \
 		hiptop.png \
diff -ru pidgin-2.2.0.orig/pidgin/plugins/Makefile.am pidgin-2.2.0/pidgin/plugins/Makefile.am
--- pidgin-2.2.0.orig/pidgin/plugins/Makefile.am	2007-08-27 22:35:01.000000000 -0400
+++ pidgin-2.2.0/pidgin/plugins/Makefile.am	2007-09-26 14:03:48.000000000 -0400
@@ -1,4 +1,4 @@
-DIST_SUBDIRS = cap gestures gevolution musicmessaging perl ticker
+DIST_SUBDIRS = cap gestures gevolution grypt musicmessaging perl ticker
 
 if BUILD_GEVOLUTION
 GEVOLUTION_DIR = gevolution
@@ -24,6 +24,7 @@
 	$(CAP_DIR) \
 	$(GESTURE_DIR) \
 	$(GEVOLUTION_DIR) \
+	grypt \
 	$(MUSICMESSAGING_DIR) \
 	$(PERL_DIR) \
 	ticker
diff -ru pidgin-2.2.0.orig/pidgin/plugins/Makefile.in pidgin-2.2.0/pidgin/plugins/Makefile.in
--- pidgin-2.2.0.orig/pidgin/plugins/Makefile.in	2007-09-14 03:31:36.000000000 -0400
+++ pidgin-2.2.0/pidgin/plugins/Makefile.in	2007-09-26 14:03:48.000000000 -0400
@@ -524,7 +524,7 @@
 target_cpu = @target_cpu@
 target_os = @target_os@
 target_vendor = @target_vendor@
-DIST_SUBDIRS = cap gestures gevolution musicmessaging perl ticker
+DIST_SUBDIRS = cap gestures gevolution grypt musicmessaging perl ticker
 @BUILD_GEVOLUTION_TRUE@GEVOLUTION_DIR = gevolution
 @ENABLE_DBUS_TRUE@MUSICMESSAGING_DIR = musicmessaging
 @ENABLE_CAP_TRUE@CAP_DIR = cap
@@ -534,6 +534,7 @@
 	$(CAP_DIR) \
 	$(GESTURE_DIR) \
 	$(GEVOLUTION_DIR) \
+	grypt \
 	$(MUSICMESSAGING_DIR) \
 	$(PERL_DIR) \
 	ticker
diff -ru pidgin-2.2.0.orig/pidgin/plugins/Makefile.mingw pidgin-2.2.0/pidgin/plugins/Makefile.mingw
--- pidgin-2.2.0.orig/pidgin/plugins/Makefile.mingw	2007-06-12 02:13:03.000000000 -0400
+++ pidgin-2.2.0/pidgin/plugins/Makefile.mingw	2007-09-26 14:03:48.000000000 -0400
@@ -9,6 +9,7 @@
 
 GTKPERL_PLUGIN := ./perl
 TICKER_PLUGIN := ./ticker
+GRYPT_PLUGIN := ./grypt
 TRANSPARENCY_PLUGIN := ./win32/transparency
 WINPREFS_PLUGIN := ./win32/winprefs
 
@@ -60,12 +61,14 @@
 all: plugins
 	$(MAKE) -C $(GTKPERL_PLUGIN) -f $(MINGW_MAKEFILE)
 	$(MAKE) -C $(TICKER_PLUGIN) -f $(MINGW_MAKEFILE)
+	$(MAKE) -C $(GRYPT_PLUGIN) -f $(MINGW_MAKEFILE)
 	$(MAKE) -C $(TRANSPARENCY_PLUGIN) -f $(MINGW_MAKEFILE)
 	$(MAKE) -C $(WINPREFS_PLUGIN) -f $(MINGW_MAKEFILE)
 
 install: all $(PIDGIN_INSTALL_PLUGINS_DIR)
 	$(MAKE) -C $(GTKPERL_PLUGIN) -f $(MINGW_MAKEFILE) install
 	$(MAKE) -C $(TICKER_PLUGIN) -f $(MINGW_MAKEFILE) install
+	$(MAKE) -C $(GRYPT_PLUGIN) -f $(MINGW_MAKEFILE) install
 	$(MAKE) -C $(TRANSPARENCY_PLUGIN) -f $(MINGW_MAKEFILE) install
 	$(MAKE) -C $(WINPREFS_PLUGIN) -f $(MINGW_MAKEFILE) install
 	cp *.dll $(PIDGIN_INSTALL_PLUGINS_DIR)
@@ -95,6 +98,7 @@
 	rm -f *.o *.dll
 	$(MAKE) -C $(GTKPERL_PLUGIN) -f $(MINGW_MAKEFILE) clean
 	$(MAKE) -C $(TICKER_PLUGIN) -f $(MINGW_MAKEFILE) clean
+	$(MAKE) -C $(GRYPT_PLUGIN) -f $(MINGW_MAKEFILE) clean
 	$(MAKE) -C $(TRANSPARENCY_PLUGIN) -f $(MINGW_MAKEFILE) clean
 	$(MAKE) -C $(WINPREFS_PLUGIN) -f $(MINGW_MAKEFILE) clean
 
